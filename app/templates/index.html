{% extends "layout.html" %}
{% block content %}
<div class="mt-10 w-full">
</div>

<div class="w-full flex flex-col items-center justify-center ">

    <div class="text-3xl mb-10 font-extrabold text-[#0D2C54]">
        Upcoming Quarter
    </div>
    <div class=" grid grid-cols-3  gap-4 justify-center max-w-[90vw]">
        <div class="side-panel p-4 bg-gray-200 shadow-lg mr-4 col-span-1 row-span-1">
            <h2 class="text-lg font-semibold my-2">Select Columns</h2>
            <div class="my-2">
                <button id="toggleColumnPanelBtn" onclick="togglePanel()"
                    class="text-xs bg-white px-3 py-2">Show/Hide</button>
            </div>
            <div id="Panel" class="space-y-2  overflow-y-scroll">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="0" checked>
                    <span>Subject Code</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="1" checked>
                    <span>Course Number</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="2">
                    <span>CRN</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="3" checked>
                    <span>Course Title</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="4" checked>
                    <span>Instructor</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="5">
                    <span>Rating</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="6" checked>
                    <span>Instruction Type</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="7" checked>
                    <span>Instruction Method</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="8" checked>
                    <span>Section</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="9">
                    <span>Enroll</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="10">
                    <span>Max Enroll</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="11" checked>
                    <span>Credits</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="12" checked>
                    <span>Prerequisites</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="13">
                    <span>Start Time</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="14">
                    <span>End Time</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="15">
                    <span>Day</span>
                </label>

            </div>




        </div>
        <div class="col-span-2 w-full row-span-3">
            <table id="myTable" class="display ">
                <thead>
                    <tr class="bg-[#0D2C54] text-white text-xs">
                        <th class="px-6 py-3 tracking-wider">Subject Code</th>
                        <th class="px-6 py-3 tracking-wider">Course Number
                        </th>
                        <th class="px-6 py-3  tracking-wider ">CRN</th>
                        <th class="px-6 py-3 tracking-wider">Course Title</th>
                        <th class="px-6 py-3 tracking-wider">Instructor</th>
                        <th class="px-6 py-3 tracking-wider">Rating</th>
                        <th class="px-6 py-3 tracking-wider">Instruction Type
                        </th>
                        <th class="px-6 py-3 tracking-wider">Instruction
                            Method</th>
                        <th class="px-6 py-3 tracking-wider">Section</th>
                        <th class="px-6 py-3 tracking-wider ">Enroll</th>
                        <th class="px-6 py-3 tracking-wider ">Max Enroll</th>
                        <th class="px-6 py-3 tracking-wider">Credits</th>
                        <th class="px-6 py-3 tracking-wider">Prerequisites
                        </th>
                        <th class="px-6 py-3 tracking-wider ">Start Time</th>
                        <th class="px-6 py-3 tracking-wider ">End Time</th>
                        <th class="px-6 py-3 tracking-wider ">Day</th>

                    </tr>
                </thead>
                <tbody class="odd:bg-white">
                    <tr>
                        <td>CS</td>
                        <td>171</td>
                        <td class="">test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td class="">test</td>
                        <td class="">test</td>
                        <td>test</td>
                        <td>test</td>
                        <td class="">test</td>
                        <td class="" test</td>
                        <td class="">test</td>
                    </tr>
                    <tr>
                        <td>Row 2 Data 1</td>
                        <td>Row 2 Data 2</td>
                        <td class="">test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td>test</td>
                        <td class="">test</td>
                        <td class="">test</td>
                        <td>test</td>
                        <td>test</td>
                        <td class="">test</td>
                        <td class="">test</td>
                        <td class="">test</td>
                    </tr>
                    <!-- {% for course in courses %}
                                                        <tr>
                                                            <td class="px-6 py-4 ">{{ course.crn }}</td>
                                                            <td class="px-6 py-4 ">{{ course.subject_code }}</td>
                                                            <td class="px-6 py-4 ">{{ course.course_number }}</td>
                                                            <td class="px-6 py-4 ">{{ course.course_title }}</td>
                                                            <td class="px-6 py-4 ">{{ course.instructor }}</td>
                                                            <td class="px-6 py-4 ">{{ course.instruction_type }}</td>
                                                            <td class="px-6 py-4 ">{{ course.instruction_method }}</td>
                                                            <td class="px-6 py-4 ">{{ course.section }}</td>
                                                            <td class="px-6 py-4 ">{{ course.enroll }}</td>
                                                            <td class="px-6 py-4 ">{{ course.max_enroll }}</td>
                                                            <td class="px-6 py-4 ">{{ course.credits }}</td>
                                                            <td class="px-6 py-4 ">{{ course.prereqs }}</td>
                                                            <td class="px-6 py-4 ">{{ course.start_time }}</td>
                                                            <td class="px-6 py-4 ">{{ course.end_time }}</td>
                                                            <td class="px-6 py-4 ">{{ course.days }}</td>
                                                        </tr>
                                                        {% endfor %} -->
                </tbody>
            </table>
        </div>


        <div class="col-span-1">
            <div class="side-panel p-4 border border-2 bg-white shadow-xl mr-4 col-span-1 row-span-1">
                <h2 class="text-lg font-semibold my-2">Filter Time</h2>
                <div id="TimePanel">
                    <div class="my-2">
                        <label for="startTime">Start Time:</label>
                        <input type="time" id="startTime" name="startTime">
                    </div>
                    <div class="my-2">
                        <label for="endTime">End Time:</label>
                        <input type="time" id="endTime" name="endTime">
                    </div>
                    <div class="my-2">
                        <button id="applyTimeFilterBtn" onclick="applyTimeFilter()"
                            class="text-xs bg-gray-200 px-3 py-2">Apply</button>
                    </div>
                </div>
                <div class="my-2">
                    <button id="toggleColumnPanelBtn" onclick="toggleTimePanel()" class="text-xs">Show/Hide</button>
                </div>
            </div>
        </div>
        <div class="side-panel p-4 bg-gray-200 shadow-lg mr-4 col-span-1 row-span-1">
            <h2 class="text-lg font-semibold my-2">Select Columns</h2>
            <div class="my-2">
                <button id="toggleColumnPanelBtn" onclick="togglePanel()"
                    class="text-xs bg-white px-3 py-2">Show/Hide</button>
            </div>
            <div id="CoursePanel" class="space-y-2  overflow-y-scroll">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="0">
                    <span>Subject Code</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" class="column-toggle" data-column="1">
                    <span>Course Number</span>
                </label>
            </div>




        </div>

    </div>

</div>
<style>
    td,
    th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
        word-wrap: break-word;
    }

    table {
        width: 100%;
        table-layout: fixed;
        /* Fixed table layout */
    }
</style>


<script>
    $(document).ready(function () {
        var table = $('#myTable').DataTable();

        $('.column-toggle').each(function () {
            var column = table.column($(this).attr('data-column'));
            column.visible($(this).is(':checked'));
        });

        $('.column-toggle').on('change', function () {
            var column = table.column($(this).attr('data-column'));
            column.visible($(this).is(':checked'));
        });
    });
    function togglePanel() {
        const columnPanel = document.getElementById('Panel');
        columnPanel.classList.toggle('hidden');
    }
    function toggleTimePanel() {
        const columnPanel = document.getElementById('TimePanel');
        columnPanel.classList.toggle('hidden');
    }
    function applyTimeFilter() {
        var startTime = document.getElementById('startTime').value;
        var endTime = document.getElementById('endTime').value;

        // For demonstration, let's assume your table has rows with start time in the first column and end time in the second column
        $('#myTable tbody tr').each(function () {
            var rowStartTime = $(this).find('td:eq(13)').text(); // Assuming start time is in the 14th column (index 13)
            var rowEndTime = $(this).find('td:eq(14)').text(); // Assuming end time is in the 15th column (index 14)

            if (isTimeInRange(rowStartTime, rowEndTime, startTime, endTime)) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    }

    function isTimeInRange(rowStartTime, rowEndTime, startTime, endTime) {
        // Implement logic to check if row's time falls within the specified range
        // Adjust this function based on your time format and comparison logic
        return rowStartTime >= startTime && rowEndTime <= endTime;
    }
</script>


{% endblock %}